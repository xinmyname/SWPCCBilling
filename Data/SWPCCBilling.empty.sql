DROP TABLE IF EXISTS [Family];
CREATE TABLE [Family] 
(
	[Id] INTEGER  NOT NULL PRIMARY KEY AUTOINCREMENT,
	[StreetAddress] TEXT  NOT NULL,
	[City] TEXT  NOT NULL,
	[State] TEXT  NOT NULL,
	[ZIP] TEXT  NOT NULL,
	[Joined] DATE  NOT NULL,
	[Departed] DATE  NULL,
	[DueDay] INTEGER DEFAULT '1' NOT NULL,
	[Notes] TEXT  NULL
);


DROP TABLE IF EXISTS [Parent];
CREATE TABLE [Parent] 
(
	[Id] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	[FirstName] TEXT NOT NULL,
	[LastName] TEXT NOT NULL,
	[Email] TEXT NULL
);

DROP TABLE IF EXISTS [Child];
CREATE TABLE [Child] 
(
	[Id] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	[FirstName] TEXT NOT NULL,
	[LastName] TEXT NOT NULL,
	[Room] TEXT NOT NULL,
	[Joined] DATE NOT NULL,
	[Departed] DATE NULL
);

DROP TABLE IF EXISTS [Fee];
CREATE TABLE [Fee]
(
	[Id] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	[Name] TEXT NOT NULL,
	[Type] TEXT NOT NULL,
	[Amount] REAL NULL
);

DROP TABLE IF EXISTS [FamilyParent];
CREATE TABLE [FamilyParent] 
(
	[FamilyId] INTEGER NOT NULL,
	[ParentId] INTEGER NOT NULL
);

DROP TABLE IF EXISTS [FamilyChild];
CREATE TABLE [FamilyChild] 
(
	[FamilyId] INTEGER NOT NULL,
	[ChildId] INTEGER NOT NULL
);

DROP TABLE IF EXISTS [FamilyDiscount];
CREATE TABLE [FamilyDiscount] 
(
	[FamilyId] INTEGER NOT NULL,
	[FeeId] INTEGER NOT NULL,
	[Percent] REAL NOT NULL,
	[EffectiveDate] DATE NOT NULL
);

DROP TABLE IF EXISTS [ChildDays];
CREATE TABLE [ChildDays]
(
	[ChildId] INTEGER NOT NULL,
	[Mon] INTEGER DEFAULT '0' NOT NULL,
	[Tue] INTEGER DEFAULT '0' NOT NULL,
	[Wed] INTEGER DEFAULT '0' NOT NULL,
	[Thu] INTEGER DEFAULT '0' NOT NULL,
	[Fri] INTEGER DEFAULT '0' NOT NULL,
	[EffectiveDate] DATE NOT NULL
);

DROP TABLE IF EXISTS [Payment];
CREATE TABLE [Payment]
(
	[FamilyId] INTEGER NOT NULL,
	[InvoiceId] INTEGER NULL,
	[CheckNum] TEXT NULL,
	[Amount] REAL NOT NULL,
	[Received] DATE NOT NULL,
	[Deposited] DATE NULL
);

DROP TABLE IF EXISTS [Ledger];
CREATE TABLE [Ledger]
(
	[Id] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	[FamilyId] INTEGER NOT NULL,
	[Date] DATE NOT NULL,
	[FeeId] INTEGER NULL,
	[PaymentId] INTEGER NULL,
	[Amount] REAL NOT NULL,
	[Notes] TEXT NULL
);

DROP TABLE IF EXISTS [Invoice];
CREATE TABLE [Invoice]
(
	[Id] INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
	[FamilyId] INTEGER NOT NULL,
	[Date] DATE NOT NULL,
	[PastDue] REAL NOT NULL,
	[NowDue] REAL NOT NULL
);

DROP TABLE IF EXISTS [InvoiceLine];
CREATE TABLE [InvoiceLine]
(
	[InvoiceId] INTEGER NOT NULL,
	[LedgerId] INTEGER NOT NULL
);

DROP TABLE IF EXISTS [SelectFeeType];
CREATE TABLE [SelectFeeType]
(
	[Type] TEXT NOT NULL,
	[Description] TEST NOT NULL
);

INSERT INTO [SelectFeeType] VALUES ('F', 'Fixed');
INSERT INTO [SelectFeeType] VALUES ('V', 'Varying');
INSERT INTO [SelectFeeType] VALUES ('P', 'Per-Minute');

